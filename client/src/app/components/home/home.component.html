<div class="dashboard-grid">
  <mat-card class="dashboard-card">
    <mat-card-header>
      <mat-card-title>Quick Actions</mat-card-title>
      <mat-card-subtitle>Start here for new entries</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="quick-actions">
      <button mat-stroked-button color="primary" [routerLink]="['/activities', 'register']">
        <mat-icon>add_circle_outline</mat-icon>
        Schedule New Activity
      </button>
      <button mat-stroked-button [routerLink]="['/patients', 'register']">
        <mat-icon>person_add</mat-icon>
        Register New Patient
      </button>
      <button mat-stroked-button [routerLink]="['/doctors', 'register']">
        <mat-icon>medical_services</mat-icon>
        Register New Doctor
      </button>
    </mat-card-content>
  </mat-card>

  <mat-card class="dashboard-card">
    <mat-card-header>
      <mat-card-title>Upcoming Activities</mat-card-title>
      <mat-card-subtitle>A preview of the schedule</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <mat-list role="list">
        @for (item of upcomingActivities$ | async; track item.id) {
          <mat-list-item role="listitem">
            <mat-icon matListItemIcon>calendar_month</mat-icon>
            <div matListItemTitle>
              {{ item.tipoAtividade | titlecase }} - {{ item.medicos.length }}
            </div>
            <div matListItemLine>
              Patient: {{ item.paciente.nome | titlecase }} |
              {{ item.inicio | date: 'dd/MM/yyyy HH:mm' : '-06:00' }}
            </div>
          </mat-list-item>
          <mat-divider></mat-divider>
        }
        <mat-list-item class="view-all-link" routerLink="/activities" matRipple>
          View full schedule...
        </mat-list-item>
      </mat-list>
    </mat-card-content>
  </mat-card>

  <mat-card class="dashboard-card">
    <mat-card-header>
      <mat-card-title>Top 10 Active Doctors</mat-card-title>
      <mat-card-subtitle>Professionals with the most activities in the period</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <mat-list role="list">
        @for (item of top10Doctors$ | async; track item.medicoId) {
          <mat-list-item role="listitem">
            <div matListItemTitle>{{ item.medico | titlecase }}</div>
            <div matListItemLine>Worked hours: {{ item.totalDeHorasTrabalhadas }}h</div>
          </mat-list-item>
          <mat-divider></mat-divider>
        }
        <mat-list-item class="view-all-link" routerLink="/doctors" matRipple>
          View all doctors...
        </mat-list-item>
      </mat-list>
    </mat-card-content>
  </mat-card>
</div>
